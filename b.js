// Generated by CoffeeScript 1.9.3
(function() {
  var Q, app, bull, co, credentials, fs, matador, queue, redisDBNumber, redisHost, redisPass, redisPort, sleep;

  fs = require('fs');

  bull = require('./index');

  queue = bull('test');

  var i, j, job, k, l, m;
  for (i = k = 0; k < 100; i = ++k) {
    queue.add({}, { delay: 10000 }).then(function(job) {
      console.log("Job " + job.jobId + " scheduled");
    });
  }

  for (i = l = 0; l < 10; i = ++l) {
    for (j = m = 0; m < 10; j = ++m) {
      queue.add({}, { delay: 8000 }).then(function(job) {
        console.log("Job " + job.jobId + " scheduled");
      });
    }
  }

}).call(this);

// Generated by CoffeeScript 1.9.3
(function() {
  var bull, queue;

  bull = require('./index');

  queue = bull('test');

  queue.process(function(job, done) {
    console.log("Job " + job.jobId + " is processed!");
    done();
  });

  queue.on('error', function(err) {
    console.log(err);
  });

  setInterval(function() {
    console.log('pub');
    queue.client.publishAsync(queue.toKey('delayed'), Date.now() - 1000);
  }, 100);

}).call(this);
